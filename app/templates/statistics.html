{% extends "layout.html" %}
{% block content %}
    <div>
    {%  for key, item in data.items() %}
    <p>
        {{ quest[key].text }} : {{ item['answer'] }}
    </p>
    {% endfor %}
    </div>
    <canvas id="chart" width="800" height="400"></canvas>

<script> // bar chart data
{% for key, value in data.items() %}
var barData = {
    labels: [{% for lbl in quest[key].variants %}"{{ lbl }}", {% endfor %}],
    datasets: [{
        fillColor: "rgba(151,187,205,0.2)",
        strokeColor: "rgba(151,187,205,1)",
        pointColor: "rgba(151,187,205,1)",
        data : [{% for val in data[key] %}"{{ val }}", {% endfor %}]
    }]
   }
{% endfor %}
// get bar chart canvas
var mychart = document.getElementById("chart").getContext("2d");
steps = 10
max = 10 // draw bar chart
new Chart(mychart).Bar(barData, {
    scaleOverride: true,
    scaleSteps: steps,
    scaleStepWidth: Math.ceil(max / steps),
    scaleStartValue: 0,
    scaleShowVerticalLines: true,
    scaleShowGridLines: true,
    barShowStroke: true,
    scaleShowLabels: true
}); </script>
{% endblock %}