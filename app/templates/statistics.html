{% extends "layout.html" %}
{% block content %}
    <div>
        {% for key, item in data.items() %}
            <p>
                {{ quest[key].text }} {#  : {{ item['answer'] }}#}
            </p>
            <div>
            <canvas id="chart_{{ key }}" width="800" height="400"></canvas>
            <script> // bar chart data
            {% if key in ['1','2','3'] %}
                var barQ1 = {
                    labels: [{% for lbl in data[key]['labels'] %}"{{ lbl }}", {% endfor %}],
                    datasets: [{
                        fillColor: "rgba(151,187,205,0.2)",
                        strokeColor: "rgba(151,187,205,1)",
                        pointColor: "rgba(151,187,205,1)",
                        data: [{% for val in data[key]['vals'] %}"{{ val }}", {% endfor %}]
                    }]
                }
                // get bar chart canvas
                var mychart_{{ key }} = document.getElementById("chart_{{ key }}").getContext("2d");
                steps = 10
                max = 10 // draw bar chart
                new Chart(mychart_{{ key }}).Bar(barQ1, {
                    scaleOverride: true,
                    scaleSteps: steps,
                    scaleStepWidth: Math.ceil(max / steps),
                    scaleStartValue: 0,
                    scaleShowVerticalLines: true,
                    scaleShowGridLines: true,
                    barShowStroke: true,
                    scaleShowLabels: true
                });
            {% endif %}
            </script>
        {% endfor %}
        </div>
    </div>

{% endblock %}